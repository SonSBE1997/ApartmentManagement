<div class="container">
  <notifier-container></notifier-container>
  <div class="row">
    <div class="col-xl-9 col-md-9 col-lg-9 col-sm-9">
      <button mat-raised-button (click)="addNew()">Thêm</button>
      <button mat-raised-button class="ml-1" (click)="save()">Lưu</button>
      <button mat-raised-button class="ml-1 download-sample" matTooltip="Tải về mẫu" (click)="downloadSample()"></button>
      <button mat-raised-button class="ml-1 import-excel" matTooltip="T ải tệp excel lên"></button>
    </div>
    <div class="col-xl-3 col-md-3 col-lg-3 col-sm-3">
      <ol class="breadcrumb float-right">
        <li class="breadcrumb-item" [routerLink]="['/apartment']">Căn hộ</li>
        <li class="breadcrumb-item active">Cập nhật thông tin</li>
      </ol>
    </div>
  </div>
  <mat-tab-group mat-align-tabs="center" (selectedIndexChange)="changeTab($event)">
    <!-- ############################# Building #################### -->
    <mat-tab label="Toà nhà">
      <div class="mt-3">
        <mat-form-field class="col-xl-3 col-md-3 col-sm-3 col-lg-3">
          <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Tìm kiếm">
        </mat-form-field>
      </div>
      <div class="mat-elevation-z8 mt-1">
        <table class="table-responsive table table-bordered table-sm" mat-table [dataSource]="dataSource1">

          <ng-container matColumnDef="c1">
            <th mat-header-cell *matHeaderCellDef style="width: 45%">Mã toà nhà</th>
            <td mat-cell *matCellDef="let row">{{row.id}}</td>
          </ng-container>

          <ng-container matColumnDef="c2">
            <th mat-header-cell *matHeaderCellDef style="width: 45%">Tên toà nhà</th>
            <td mat-cell *matCellDef="let row; let i = index" [contentEditable]=true [id]="'bname' + i"
              (blur)="changeData($event,'name', i)">{{row.name}}</td>
          </ng-container>
          <ng-container matColumnDef="c3">
            <th mat-header-cell *matHeaderCellDef style="width: 5%"></th>
            <td mat-cell *matCellDef="let row; let i = index">
              <a mat-button class="delete" (click)="removeItem(row.id, i)"><i class="material-icons">&#xE872;</i></a>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="['c1','c2','c3']"></tr>
          <tr mat-row *matRowDef="let row; columns: ['c1','c2','c3']; let i = index">
          </tr>
        </table>
      </div>
    </mat-tab>
    <!-- ############################# Floor #################### -->
    <mat-tab label="Tầng">
      <div class="row mt-3">
        <mat-form-field class="col-xl-3 col-md-3 col-sm-3 col-lg-3">
          <input matInput (keyup)="fFilter($event.target.value)" placeholder="Tìm kiếm">
        </mat-form-field>
        <div class="col-xl-4 col-md-4 col-sm-4 col-lg-4"></div>
        <mat-form-field class="col-xl-3 col-md-3 col-sm-3 col-lg-3">
          <mat-label>Chọn toà nhà</mat-label>
          <mat-select >
            <ng-container *ngFor="let b of buildings">
              <mat-option [value]="b.id">{{b.name}}</mat-option>
            </ng-container>
          </mat-select>
        </mat-form-field>
        <div class="col-xl-2 col-md-2 col-sm-2 col-lg-2">
          <button mat-raised-button style="margin-top: 10px;">
            Lọc <i class="fa fa-filter"></i>
          </button>
          <!-- <button *ngIf="isFilter===true" mat-raised-button style="margin-top: 10px;" (click)="cancelFilter()">
            Huỷ lọc
          </button> -->
        </div>
      </div>
      <div class="mat-elevation-z8 mt-1">
        <table class="table-responsive table table-bordered table-sm" mat-table [dataSource]="dataSource2" matSort>
          <ng-container matColumnDef="f1">
            <th mat-header-cell *matHeaderCellDef style="width: 30%">Toà nhà</th>
            <td mat-cell *matCellDef="let row">
              <mat-select [value]="row.building.id">
                <ng-container *ngFor="let b of buildings">
                  <mat-option [value]="b.id">{{b.name}}</mat-option>
                </ng-container>
              </mat-select>
            </td>
          </ng-container>

          <ng-container matColumnDef="f2">
            <th mat-header-cell *matHeaderCellDef mat-sort-header style="width: 30%">Mã toà nhà</th>
            <td mat-cell *matCellDef="let row">{{row.id}}</td>
          </ng-container>

          <ng-container matColumnDef="f3">
            <th mat-header-cell *matHeaderCellDef mat-sort-header style="width: 30%">Tên toà nhà</th>
            <td mat-cell *matCellDef="let row; let i = index" [contentEditable]=true [id]="'fname' + i"
              (blur)="changeData($event,'name', i)">{{row.name}}</td>
          </ng-container>
          <ng-container matColumnDef="f4">
            <th mat-header-cell *matHeaderCellDef style="width: 10%"></th>
            <td mat-cell *matCellDef="let row; let i = index">
              <a mat-button class="delete" (click)="removeItem(row.id, i)"><i class="material-icons">&#xE872;</i></a>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="['f1','f2','f3','f4']"></tr>
          <tr mat-row *matRowDef="let row; columns: ['f1','f2','f3','f4']; let i = index">
          </tr>
        </table>
        <mat-paginator [pageSize]="5" [pageSizeOptions]="[5, 10, 25, 50]" showFirstLastButtons></mat-paginator>
      </div>
    </mat-tab>
    <!-- ############################# Room #################### -->
    <mat-tab label="Căn hộ"> Content 3 </mat-tab>
  </mat-tab-group>
</div>
